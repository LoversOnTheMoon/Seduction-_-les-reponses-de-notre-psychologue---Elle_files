+function(){"use strict";var t=function(){this.construct.apply(this,arguments)};t.prototype={construct:function(t){this.opts="object"==typeof t?t:{},this.opts.log="boolean"==typeof this.opts.log&&this.opts.log,this.opts.groups=Array.isArray(this.opts.groups)?this.opts.groups:[],this.opts.groups.forEach(function(t,o){if("object"!=typeof t)throw"opts.groups["+o+"] is not an object!";if("string"!=typeof t.name)throw"opts.groups["+o+"].name is not a string!";if("boolean"!=typeof t.isParallelDownload)throw"opts.groups["+o+"].isParallelDownload is not a boolean!";if("string"!=typeof t.scriptQuerySelector)throw"opts.groups["+o+"].scriptQuerySelector is not a string!";t.scripts=[];for(var r=document.querySelectorAll(t.scriptQuerySelector),o=0;o<r.length;o++)t.scripts.push(r[o]);t.scriptSrc=Array.isArray(t.scriptSrc)?t.scriptSrc:[],t.scripts=t.scripts.concat(t.scriptSrc)},this)},load:function(){var t=this;this.log("load : start"),this.loadGroupsSerial(this.opts.groups,function(){t.log("load : done")})},loadGroupsSerial:function(t,o){var r=this,i=t.shift();if(i){if(!i.isParallelDownload)return this.log("loadGroupSerial : "+i.name+" : start"),void this.loadScriptsSerial(i.scripts,function(){r.log("loadGroupSerial : "+i.name+" : done"),r.loadGroupsSerial(t,o)});this.log("loadGroupParallel : "+i.name+" : start"),this.loadScriptsParallel(i.scripts,function(){r.log("loadGroupParallel : "+i.name+" : done"),r.loadGroupsSerial(t,o)})}else o()},loadScriptsSerial:function(t,o){var r=this,i=t.shift();i?(this.log("loadScriptSerial : start"),this.addOrReplaceScript(i,function(){r.log("loadScriptSerial : done"),r.loadScriptsSerial(t,o)})):o()},loadScriptsParallel:function(t,o){for(var r=this,i=t.length,a=0;t.length;){var s=t.shift();this.log("loadScriptParallel : start"),this.addOrReplaceScript(s,function(){r.log("loadScriptParallel : done"),a++})}var e=function(){if(a!==i)return setTimeout(e,1);o()};e()},addOrReplaceScript:function(t,o){"string"!=typeof t?this.replaceScript(t,o):this.addScript(t,o)},replaceScript:function(t,o){var r=document.createElement("script");r.dataset.type=t.type,t.hasAttribute("src")?(r.async=!0,r.onload=o):r.innerHTML=t.innerHTML,t.parentNode.removeChild(t),document.body.appendChild(r),t.hasAttribute("src")?r.src=t.src:o()},addScript:function(t,o){var r=document.createElement("script");r.dataset.type="LazyScriptLoader",r.async=!0,r.onload=o,document.body.appendChild(r),r.src=t},log:function(t){this.opts.log&&console.log("[LazyScriptLoader] "+t)}};var o=function(){if("loading"===document.readyState)return setTimeout(o,1);var r=document.querySelector("#LazyScriptLoader");r&&new t(JSON.parse(r.dataset.opts)).load()};o()}();